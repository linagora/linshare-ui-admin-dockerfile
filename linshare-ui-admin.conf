<VirtualHost *:443>

	PassEnv EXTERNAL_URL
	PassEnv TOMCAT_URL
	PassEnv TOMCAT_PORT

	ServerAdmin webmaster@server
	ServerName  ${EXTERNAL_URL}

	DocumentRoot /usr/local/apache2/htdocs/linshare-ui-admin

    LogLevel warn

    SSLEngine on
    SSLCertificateFile      /usr/local/apache2/conf/server.crt
    SSLCertificateKeyFile   /usr/local/apache2/conf/server.key
    SSLCertificateChainFile /usr/local/apache2/conf/server-ca.crt
    RequestHeader add X-Forwarded-Scheme "https"

    <Location /linshare>
        ProxyPass           http://${TOMCAT_URL}:${TOMCAT_PORT}/linshare/webservice/rest/admin
        ProxyPassReverse    http://${TOMCAT_URL}:${TOMCAT_PORT}/linshare/webservice/rest/admin
        ProxyPassReverseCookiePath /linshare /
        Header set Cache-Control "max-age=0,no-cache,no-store"
    </Location>
</Virtualhost>
