<VirtualHost *:443>

	PassEnv EXTERNAL_URL
	PassEnv TOMCAT_URL
	PassEnv TOMCAT_PORT

	ServerAdmin webmaster@server
	ServerName  ${EXTERNAL_URL}

	DocumentRoot /usr/local/apache2/htdocs/linshare-ui-admin

    LogLevel warn

    SSLEngine on
    SSLCertificateFile      /usr/local/apache2/conf/ssl/server.crt
    SSLCertificateKeyFile   /usr/local/apache2/conf/ssl/server.key
    SSLCertificateChainFile /usr/local/apache2/conf/ssl/server-ca.crt
    SSLProtocol ALL -SSLv2 -SSLv3
    SSLCompression Off
    SSLHonorCipherOrder On
    SSLCipherSuite ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS
    RequestHeader add X-Forwarded-Scheme "https"

    <Location /linshare>
        ProxyPass           http://${TOMCAT_URL}:${TOMCAT_PORT}/linshare
        ProxyPassReverse    http://${TOMCAT_URL}:${TOMCAT_PORT}/linshare
        ProxyPassReverseCookiePath /linshare /
        Header set Cache-Control "max-age=0,no-cache,no-store"
    </Location>
</Virtualhost>
